<section class="projects-section" id="projects">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Featured <span class="highlight">Projects</span></h2>
      <p class="section-subtitle">A showcase of my recent work and problem-solving approach</p>
      <div class="divider"></div>
    </div>
    
    <div class="filters-section">
      <div class="search-bar">
        <i class="fas fa-search"></i>
        <input 
          type="text" 
          [(ngModel)]="searchQuery" 
          (input)="filterProjects()" 
          placeholder="Search projects or technologies..."
        />
      </div>
      
      <div class="filter-controls">
        <div class="filter-group">
          <label><i class="fas fa-folder"></i> Category:</label>
          <select [(ngModel)]="selectedCategory" (change)="filterProjects()">
            <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label><i class="fas fa-code"></i> Technology:</label>
          <select [(ngModel)]="selectedTech" (change)="filterProjects()">
            <option *ngFor="let tech of technologies" [value]="tech">{{ tech }}</option>
          </select>
        </div>
        
        <button class="reset-btn" (click)="resetFilters()" *ngIf="searchQuery || selectedCategory !== 'All' || selectedTech !== 'All'">
          <i class="fas fa-redo"></i> Reset
        </button>
      </div>
      
      <div class="results-count">
        <span>{{ filteredProjects.length }} project{{ filteredProjects.length !== 1 ? 's' : '' }} found</span>
      </div>
    </div>
    
    <div class="projects-grid" *ngIf="paginatedProjects.length > 0">
      <div class="project-card" *ngFor="let project of paginatedProjects; let i = index" 
           [style.animation-delay]="(i * 0.1) + 's'">
        <div class="card-image">
          <div class="image-container" (click)="viewImage(project.image)">
            <img [src]="project.image" [alt]="project.title">
            <div class="image-overlay">
              <i class="fas fa-search-plus"></i>
            </div>
            <div class="hover-preview">
              <div class="preview-content">
                <h4>{{ project.title }}</h4>
                <div class="preview-tech">
                  <span *ngFor="let tech of project.caseStudy.technologies.slice(0, 4)" class="tech-tag">
                    {{ tech }}
                  </span>
                </div>
                <p class="preview-result">{{ project.caseStudy.results.split(',')[0] }}</p>
              </div>
            </div>
          </div>
          <div class="card-badge">{{ project.category }}</div>
        </div>
        
        <div class="card-content">
          <h3 class="project-title">{{ project.title }}</h3>
          <p class="project-description">{{ project.description }}</p>
          
          <div class="tech-preview">
            <span class="tech-pill" *ngFor="let tech of project.caseStudy.technologies.slice(0, 3)">{{ tech }}</span>
            <span *ngIf="project.caseStudy.technologies.length > 3" class="tech-more">+{{project.caseStudy.technologies.length - 3}} more</span>
          </div>
          
          <div class="card-footer">
            <div class="result-preview">
              <i class="fas fa-chart-line"></i>
              <span>{{ project.caseStudy.results.split(',')[0] }}</span>
            </div>
            <div class="project-actions">
              <a [href]="project.link" target="_blank" class="project-link">
                <i class="fas fa-external-link-alt"></i> View
              </a>
              <button (click)="viewCaseStudy(project)" class="case-study-btn">
                <i class="fas fa-search"></i> Case Study
              </button>
            </div>
            
            <div class="share-section">
              <span class="share-label">Share:</span>
              <button (click)="shareProject(project, 'twitter')" class="share-btn twitter" title="Share on Twitter">
                <i class="fab fa-twitter"></i>
              </button>
              <button (click)="shareProject(project, 'linkedin')" class="share-btn linkedin" title="Share on LinkedIn">
                <i class="fab fa-linkedin"></i>
              </button>
              <button (click)="shareProject(project, 'facebook')" class="share-btn facebook" title="Share on Facebook">
                <i class="fab fa-facebook"></i>
              </button>
              <button (click)="shareProject(project, 'whatsapp')" class="share-btn whatsapp" title="Share on WhatsApp">
                <i class="fab fa-whatsapp"></i>
              </button>
              <button (click)="copyLink(project)" class="share-btn copy" title="Copy Link">
                <i class="fas fa-link"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="no-results" *ngIf="paginatedProjects.length === 0">
      <i class="fas fa-search"></i>
      <h3>No projects found</h3>
      <p>Try adjusting your filters or search query</p>
      <button class="reset-btn" (click)="resetFilters()">
        <i class="fas fa-redo"></i> Reset Filters
      </button>
    </div>
    
    <div class="pagination" *ngIf="totalPages > 1">
      <button 
        class="page-btn" 
        (click)="changePage(currentPage - 1)" 
        [disabled]="currentPage === 1"
      >
        <i class="fas fa-chevron-left"></i>
      </button>
      
      <button 
        *ngFor="let page of [].constructor(totalPages); let i = index" 
        class="page-btn" 
        [class.active]="currentPage === i + 1"
        (click)="changePage(i + 1)"
      >
        {{ i + 1 }}
      </button>
      
      <button 
        class="page-btn" 
        (click)="changePage(currentPage + 1)" 
        [disabled]="currentPage === totalPages"
      >
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</section>

<div class="modal-overlay" *ngIf="selectedProject" (click)="closeCaseStudy()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">{{ selectedProject.title }}</h2>
      <button class="close-modal" (click)="closeCaseStudy()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="modal-body">
      <div class="project-hero">
        <div class="hero-image">
          <img [src]="selectedProject.image" [alt]="selectedProject.title">
        </div>
        <div class="hero-content">
          <p class="hero-description">{{ selectedProject.description }}</p>
          <a [href]="selectedProject.link" target="_blank" class="live-demo-btn">
            <i class="fas fa-rocket"></i> View Live Project
          </a>
        </div>
      </div>
      
      <div class="case-study-grid">
        <div class="case-study-card challenge">
          <div class="card-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h3>Challenge</h3>
          <p>{{ selectedProject.caseStudy.challenge }}</p>
        </div>
        
        <div class="case-study-card solution">
          <div class="card-icon">
            <i class="fas fa-lightbulb"></i>
          </div>
          <h3>Solution</h3>
          <p>{{ selectedProject.caseStudy.solution }}</p>
        </div>
        
        <div class="case-study-card results">
          <div class="card-icon">
            <i class="fas fa-trophy"></i>
          </div>
          <h3>Results</h3>
          <p>{{ selectedProject.caseStudy.results }}</p>
        </div>
        
        <div class="case-study-card technologies">
          <div class="card-icon">
            <i class="fas fa-cogs"></i>
          </div>
          <h3>Technologies</h3>
          <div class="tech-stack">
            <span class="tech-item" *ngFor="let tech of selectedProject.caseStudy.technologies">
              <i class="fas fa-check"></i> {{ tech }}
            </span>
          </div>
        </div>
      </div>
      
      <div class="modal-share">
        <span class="share-label">Share this project:</span>
        <div class="share-buttons">
          <button (click)="shareProject(selectedProject, 'twitter')" class="share-btn twitter">
            <i class="fab fa-twitter"></i> Twitter
          </button>
          <button (click)="shareProject(selectedProject, 'linkedin')" class="share-btn linkedin">
            <i class="fab fa-linkedin"></i> LinkedIn
          </button>
          <button (click)="shareProject(selectedProject, 'facebook')" class="share-btn facebook">
            <i class="fab fa-facebook"></i> Facebook
          </button>
          <button (click)="shareProject(selectedProject, 'whatsapp')" class="share-btn whatsapp">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </button>
          <button (click)="copyLink(selectedProject)" class="share-btn copy">
            <i class="fas fa-link"></i> Copy Link
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="image-modal" *ngIf="selectedImage" (click)="closeImage()">
  <div class="image-modal-content">
    <button class="close-image" (click)="closeImage()">
      <i class="fas fa-times"></i>
    </button>
    <img [src]="selectedImage" alt="Full size image">
  </div>
</div>